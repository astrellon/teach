<html>
  <head>
    <title>Exercises</title>
    <link rel="stylesheet" href="../common/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../common/bootstrap/css/bootstrap-theme.css">
    <link rel="stylesheet" href="../common/highlight/styles/default.css">
    
    <link rel="stylesheet" href="../common/css/style.css">
    <script src="../common/jquery/jquery-2.1.4.js">
    <script src="../common/bootstrap/js/bootstrap.js"></script>
    <script src="../common/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <style>
    @-webkit-keyframes move-background {
      from { background-position-x: 0; }
      to {background-position-x: 128px; }
    }
    .congrats {
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-image:
      url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wYDDAMKcKsdrQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAUASURBVHjavVvLbhtBDBMXzSVt//9DmwLNJewlBfYhidTspgaM2LuOR6ORKIozBiMYPyKs5/eI+Cnef77+8y3iV0T8juPft8/n/vrb6XX1fI8X09C9MYWB/+59vNYGVca+aaNfP9ZcuL/2/WhpvMR74lHlwd6zW0weaN7zeI3G1+B0jbH6YDEKcuP219EYVN1zhhdzZzFvFmaw/IRjQH1/W/o/7u4x8TeuE2IyGSbOoTUlisg8G4nk9SlSKebbDYt5yMKYCZYyk00iOAFA43tVZvB6G6bfPJ866Qjh2iSTcC+7V3ALp/hjEcZIFxNJhM6icWsX3ckGkbJs3nMMWG42sHBv8jkkH61SFc8HBJNqk91j6RkWme5h6VYGkkIF+FVHgbGf3xwEAQznoL7EBfAZshUkPuhLAAQcz7F0s/4HoswkYZuVAJrVew36HW6QIAOTudGMHzM+FcDCAFvImk9zcVwSOEk2XleaCalTPqQ9/CQ9WWTQLlLP9sNEQXMlJ2GbcYG6BND0Zm3JZicbG7qOK87D6B45gr8pblBgj5GyaJjZWteVLhsKUMcleTBASVjG+ToAihYQdf1kQWr4ZYSbZkdQGFX1pPC/bjKc6oxYmsekPmHQx3IYAKq1xDVbaLQ+KCrzvQ6gM5LXHhZNSqLp126EJpsqzmLIfAEgoDkLr6NfNtuvFJlx8i0aYFJw90zm05sIxTwzzeOG8IPCN5SSzRQrPda+WQiqyHWSbFmUYziFWUOl1C/m4IomedCk50MikdN9og3kaLysxCEWbeC0R2OdfBiIk7MyMOXWRV9XSdps0PMGEtyTFZgwAxRF1KlVEFKwCjqxB8PoNz0e1liaCiooJ8w2hM/g1YQb9GIQGshfEYKUUoHG1yeoRMN++YDjPD2ATW93alfcAH8w02lKCrQzshJnpkLQZJUKLZMJana6dxi0TS+0W8MKC1Rb8gDkU7iOtu6UlYEQPYQrBDl0tKqVyTg0tat5nWT4uzRDCjppS+gvvjpSgda9K61JX3y3R/Ftt7odjwo7PqcNlloNCIg0KgiFaDREs5mYSxOu1Vb4NAA4XwsKBGhi50bkqTAqdiaUNq2+3jhaoIoUGo2k9guFUZTUexv52Vkhan2ORj3kXQiyWK0oxIob0IcuiHA8D892CGcR0Ch3rhDUaS4sOgBDioHh67WzFzAitjB2InrNRYtxUOSVXTeJo1IXIYSgDs/Qr+DK3v990t1V3kYY6gKcRiDcaBkriSrX1jrG3W2ErR4KVRaLLJhsXj7TcndCBXJ8qXpTDCkH1kNUAasOG5oKw0QHcKSqitay56iMeudrLdtpwpYACBrMzFlszvGp6q6PvmkCWRJeDnUAxeBC9HlR73A9sLlmwmDHC9ATOed09BD6FKunoHB16mTHR5SXuVgCsiNUA+rw/x5ql/3TQleL5XMT6Q6DVK5FSZEdBbCe4GZhFUV5KSDUPaL53IJD5F1TN7v9atQot7J/MEmMY7VXmYfxKN4vg2BC5W5V1Y78vXbPoZMw8LzpWWFmvmhd1OJSDHVEBUR3ZHTlJOtmwV+I5EqcQCEhfF2pcFgbrp0Aoz6Se6MsqCSogAUtAiC849+aXW3Sl4poNgGpqrA6te8Fw6SQUMuV7i+BsCYKrf7GFJZSIn6vd0sKrpQdDAQqY3GxlPGuSlM4CAWxdjnVoiLYHUbqc9jdaclODx/v/wWE67xpkKBH9gAAAABJRU5ErkJggg==);

      -webkit-animation: move-background 2s linear 0s infinite;

      font-weight: bold;
      text-transform: uppercase;

      transition: all 0.5s ease-out;
      -webkit-transform: translateZ(0);
    }
    .congrats:hover {
      font-size: 2.5em;
      -webkit-animation-duration: 1s;
      -webkit-transform: rotateZ(360deg);
    }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <h1>Adventure Exercises</h1>
      <div>
        <h2>Introduction</h2>
        <p>
          Alright! Lets aim to make a super simple text adventure game! Don't worry, this doesn't require any fancy. I've made solutions for each exercise along with one that is considered 'complete', in that I've taken many different combinations of game state into account that aren't really necessary.
        </p>
        First though let's run down the different aspects of games in general. We'll look at what actually relates to text adventure games next.
        <ul>
          <li><b>Graphics:</b> 3D/2D/Text</li>
          <li><b>Sound:</b> 3D/2D/Mono/None</li>
          <li><b>Input:</b> Keyboard and/or mouse/Game controller.</li>
          <li><b>Physics:</b> Simulation quality/3D/2D/None.</li>
          <li><b>Story:</b> Lots/Some/None</li>
          <li><b>Progression:</b> So many different options </li>
          <li><b>Saving and Loading:</b> Yes/No</li>
          <li><b>Multiplayer:</b> Online/Local/None</li>
        </ul>
        <p>
          So that's a lot of things, and there are many more smaller details to figure out about how your game is going to work. Thankfully for a text adventure most of those things can be ignored by design, and we'll ignore several more because we're keeping things simple.
        </p>
        <p>
          So let's have a quick look at what is required from a text adventure game, and specifically our simple text adventure.
        </p>
        <ul>
          <li><b>Graphics:</b> Text</li>
          <li><b>Sound:</b> None</li>
          <li><b>Input:</b> Keyboard</li>
          <li><b>Physics:</b> None</li>
          <li><b>Progression:</b> 
          <ul>
            <li>Text adventures are usually segmented into different locations, in this case I'm going to refer to them as rooms.</li>
            <li>Objects in the game have different states, like is a door opened or closed. Or does the player currently have a certain item in their possession.</li>
            <li>Some way of progressing through the rooms to a winning state (or losing state).</li>
          </ul>
          </li>
          <li><b>Store:</b> Bare minimum!</li>
          <li><b>Saving and Loading:</b> No</li>
          <li><b>Multiplayer:</b> None</li>
        </ul>
        <p>
          From this high level look at what's needed we can start to write down some more detail about how things should work. For this exercise I'm going to layout the progression through the game, but as a creative exercise you can always make your own.
        </p>
        <h3>Level Layout</h3>
        <p>
          So using the concept of a room, we'll make three different rooms, with the winning state being triggered when the player reaches the third room. Which means in reality we only need to program two rooms. 
        </p>
        <b> First Room: </b>
        <ul>
          <li>Starting location</li>
          <li>One closed door to the north that leads to the second room.</li>
          <li>The player must open the door before moving forwards. If the door is still closed we should sarcastically inform the player.</li>
        </ul>
        <b> Second Room: </b>
        <ul>
          <li>The player can return the first room.</li>
          <li>There is another door to the north that is both closed and locked.</li>
          <li>There is a key somewhere in the room (I'm putting it on a table) that must be used to unlock the door before opening the door.</li>
        </ul>
        <b> Third Room: </b>
        <ul>
          <li>Winning state.</li>
          <li>I'm calling this room outside with the epic saga concluding that the player was able to leave their house.</li>
          <li>At this point no action is available to the player before the game is over.</li>
        </ul>

        <h3>Game State</h3>
        So what do we need to keep track of to make this game work?
        <ul>
          <li>The players current location/room.</li>
          <li>Is the first door open?</li>
          <li>Is the second door open?</li>
          <li>Is the second door unlocked?</li>
          <li>And does the player have the key?</li>
        </ul>
        That's is, 4 booleans (true/false values) and a string to indicate the room ('first'/'second'/'outside' is what I'll be using).

        <h3>Player Input</h3>
        <p>
          Each action the player can take should be in the form of a simple verb and noun, such as 'open door' or 'take key'. We can always use more complicated phrases such as 'pick up the key on the table' however for simplicity I'm going to keep the actions short.
        </p>
        <p>
        So there are two main ways of getting player input, using the prompt function, or using a <b>&lt;input type="text"&gt;</b>. I'm going to be using a input tag, however this is just personal preference.
        </p>
        Something like this:
        <p>
          <input type="text" placeholder="Player Action">
          <button>Go</button>
        </p>

        <h4>Handling Player Input</h4>
        Player input actions are going to be pretty basic, ie 'open door', 'go north', etc. The easiest way to do something based off the user input is to just use an if statement.
        <pre>
if (action === 'open door')
{
    // Open the door?
}
else if (action === 'go north')
{
    // Go north?
}</pre>
        Without going into too much detail, handling the player input isn't going to be any more complicated than this!


        <h3>Game Output</h3>
        <p>
          We'll need some way of displaying information to the player. Again there are many different ways of doing this. I'm going to take a relatively easy route of adding new <b>&lt;div&gt;</b> elements to the page that contain the information, along with the action the player gave. I'll show you how to do this in Javascript, don't worry it's pretty easy.
        </p>
        <p>
          So we're aiming to get something that looks like this:
        </p>
        <div>
          <b>look:</b>
          <div>Looking around the room, you see important details that you should pay attention to.</div>
        </div>
      </div>

      <div>
        <h2>01 - Simple Beginnings</h2>
        So first thing we'll need is some basic UI to test with and some extra files. So we'll need:
        <ul>
          <li>A blank adventure.js file and script tag linking it.</li>
          <li>A blank adventure.css file and a link tag linking it.</li>
          <li>A nice big header welcoming the player to adventure.</li>
          <li>A button (or some other way) for starting the game.</li>
          <li>A container for adding game text to.</li>
        </ul>
        Here we're basically creating the skeleton of the game. No functionality needs to be added yet, but some id's should be put onto contains and the input where it makes sense.
        There is a solution for this starting part if you want to make sure that things are happening correctly. In the 01-beginnings folder.
    </div>

    <div>
      <h2>02 - Some Code</h2>
      <p>
        Now that we have a basic outline of the html that we'll need. We're going to add to it as needed, but all the important parts are there already.   
      </p>
      <h3>Start Game Function</h3>
      <p>
        When the player clicks the start button we'll want to add some text to the game world container indicating that the game has started. 
      </p>
      <p>
        Here is how you can create new elements and add it to an element with the id "game-world-text" 
      </p>
      <pre>
function addGameWorldText(text)
{
    var gameWorldTextEl = document.getElementById('game-world-text');

    // This creates a new element. Until it is added to something already in the page
    // it'll just be floating no-where and won't appear.
    var newEl = document.createElement('div');
    // Setting the innerHTML allows you to change the raw html inside that element.
    newEl.innerHTML = text;

    // Now that the element has been created and its html set we can add it 
    // to the game world text container.
    gameWorldTextEl.appendChild(newEl);
}</pre>
      <p>
        Using this function you should be able to add some text to the game world when the game starts. 
      </p>

      <h3>Starting the game once</h3>
      <p>
        So right now you should have a button that when pressed is outputting some text to the game world container using something similar to the <code>addGameWorldText(text)</code> above. Really we want to only start the game once. So lets add a variable to track that the game has started. So the <code>startGame</code> function should check if the game has started already and then do nothing, otherwise start the game and change the value the game started variable.
      </p>
    </div>

    <div>
      <h2>03 - Player Input</h2>
      <p>
        Okay so the game can be started, lets get some player input and do something with it. Lets create a function for the <b>Go</b> button so that when pressed we get the value of the player action input, do something with it and clear the player action input.
      </p>
      <p>
        So unlike the <b>Start</b> button which directly calls the <code>startGame</code> function, the <b>Go</b> button needs to do a bit more to get the player action input and then off-load the handling of that action to something else. So we're going to create an <b>onGoClick</b> function for the <b>Go</b> button to call.
      </p>
      We want to grab the value of the player-action input, do nothing if nothing has been entered, or handle the input and clear the input field.
      <pre>
function onGoClick()
{
    var playerActionEl = document.getElementById('player-action');

    var action = playerActionEl.value;
    if (action === '')
    {
        return;
    }

    // Clear the player action input field.
    playerActionEl.value = '';
    processPlayerAction(action);
}</pre>
    <p>
      So with this the <b>Go</b> button can grab the player action input and then pass off the processing of the player input to the <b>processPlayerAction</b> function. So lets write the <b>processPlayerAction</b> function now!
    </p>
    <p>For my example I'm going to add another variable <b>currentRoom</b> and  have the player be able to change the current room.</p>
    <p>This <b>processPlayerAction</b> function is going to be the main focus of our game. Here is the basic outline of how the function should work:</p>
    <pre>
function processPlayerAction(action)
{
    if (action === 'simple action')
    {
        addGameWorldText('The player performed a simple action.');
    }
    else if (action === 'some other action')
    {
        addGameWorldText('The player performed some other action.');
    }
}</pre>
    <p>
      So we should make a few different actions:
    </p>
    <ul>
      <li><b>look:</b> This should tell the player what room they're currently in using the <b>currentRoom</b> variable.</li>
      <li><b>go north:</b> This should change the players <b>currentRoom</b> value to some other value (eg: 'second').</li>
      <li><b>go south:</b> This should change the players <b>currentRoom</b> value back to the original value (eg: 'first').</li>
    </ul>
    There should also be a fallback if the action isn't one of those and tell the player something along the lines of <code>I don't know how to action</code>.
    </div>

    <h2>04 - Game State</h2>
    <div>
      Now that we have output and input and some basic way of handling player input then really we just need to add more stuff at the moment.
      <p>
        Lets review our goal for the game:
      </p>
      <ul>
        <li>The players current location/room.</li>
        <li>Is the first door open?</li>
        <li>Is the second door open?</li>
        <li>Is the second door unlocked?</li>
        <li>And does the player have the key?</li>
      </ul>
      So we have 4 booleans (true/false) and 1 string for the current room. So lets make sure that we have these variables in the code.
      <pre>
var currentRoom = 'first';

// Variables for first room
var firstDoorOpen = false;

// Variables for second room;
var secondDoorOpen = false;
var secondDoorLocked = true;
var secondKey = false;</pre>
      <p>
        So what we need is a way to change these values based on player action, and to have these values affect the outcome of player action.
      </p>
      <p>
        Lets use the first room's door as an example.
      </p>
      <pre>
if (currentRoom === 'first')
{
    if (action === 'open door')
    {
        if (firstDoorOpen)
        {
            addGameWorldText('The door is already open you clod.');
        }
        else
        {
            firstDoorOpen = true;
            addGameWorldText('The door opens with a bit of effort.');
        }
    }
    else if (action === 'go north')
    {
        if (firstDoorOpen)
        {
            addGameWorldText('You leave the dusty room behind.');
            currentRoom = 'first';
        }
        else
        {
            addGameWorldText('Attempting to leave the door through a closed door fails.');
        }
    }
} </pre>
    <p>
      Now that's a fair chunk of code, but it's all if statements, adding output to the game text and changing values. Also this code will only run when in the first room. Once the player goes to the second room it will not run.
    </p>
    <p>
      The first room will also need a 'look' action for describing what it looks like and giving some sort of direction about what the player should do next. eg: 'There is a closed door to the north'.
    </p>
    <p>
      As an exercise you should implement the code for the second room, making sure that it follows this logic:
    </p>
    <ul>
      <li>The player cannot go north until the door is open.</li>
      <li>The door cannot be open while it is locked.</li>
      <li>The door cannot be unlocked until the key has been picked up.</li>
    </ul>
    If you get stuck, there will be a more complete solution in the next exercise.
    </div>

    <div>
      <h2>05 - Some Style</h2>
      <p>
        Now we've got some things happening, we might want to make it look ever so slightly better looking. We can also take this opportunity to actually make starting the game mean something. As I'm sure you're aware but starting the game just outputs some text to the screen, it doesn't really start anything. Also we aren't outputting the player action to the game text either, but we'd want that to stand out slightly from the rest of the text, because why not.  
      </p>
      <p>
        So we need to have a way of identifying the div container that has the game-world-text and player action inputs. Lets set the id of that div to 'game-world'. This will allow us to refer to it in code. In addition we should make a CSS class that allows us to hide the game-world when the page loads and then we can remove that hiding class when the game is started to reveal the game world.
      </p>
      <p>
        So how does one add and remove CSS classes?
        <pre>
var gameWorldEl = document.getElementById('game-world');
gameWorldEl.classList.remove('hide');

var startWorldEl = document.getElementById('start-game');
startWorldEl.classList.add('hide');</pre>
      </p>

      <p>
        Running the code above when the game starts will hide the start-game elements and show the game-world if the correct id's have been set onto the elements. Refer to the solution 05-style if this isn't making sense.
      </p>

      <p>
        We should also take this time to add the player actions to the game world text, but we want it to look slightly different in some way. So make a copy of the <code>addGameWorldText</code> function and call the new function <code>addPlayerActionText</code>. This function is going to be the same except we're going to apply what we learnt about adding classes to elements here as well. We want to add a class to the new action div elements and then make a class in the CSS that makes the player action stand out in some way. It can be as simple as <code>font-weight: bold;</code>.
      </p>
      We'll also need to call the <code>addPlayerActionText</code> function from the <code>onGoClick</code> function just before the <code>processPlayerAction</code> function is called.
    </div>

    <div>
      <h2>06 - Winning State</h2>
      <p>
        Now the player has a way of starting the game and progressing through the rooms, we need a way to end the game as well. This can be as simple as having another element in the html that states that the player has won that's hidden at the start and then shown.
      </p>
      Where you have whatever code that allows the player to successfully move beyond the second room, all you need to do is hide the <b>game-world</b> element show the <b>winner</b> element.
    </div>

    <div>
      <h2>Conclusion</h2>
      <p>
        If you've made it this far and understood what was going on then <span class="congrats">congratulations</span>! You've just made a simple text adventure game! If you're not completely bored of the text adventure game feel free to checkout my solution which does have a few differences. Mostly in the way I've slightly re-organised a few things into more functions. And I don't have a "Go" button, instead pressing Enter allows the player to input an action (Madness!). My winning state is shown in the game world text instead of a different element. Just showing some different ways of approaching things.
      </p>
      <p>
        Hopefully you've learnt something about how to make a basic text adventure and a really basic game. Also think about how if we kept the current structure (lots of if statements, a bunch of variables at the top of the file) but scaled the game size up to something that's supposed to be played for many hours. Does it seem like things would be unmanageable fairly quickly? Because I think things would get crazy! So at some point I'll need to show you how to organise things in an even better way beyond just some functions and variables. However it's not like there's anything wrong with the approach we've taken here for something of this scale, with experience comes the knowledge when more complex yet more maintainable structures are needed and when they are not.
      </p>
    </div>
  </body>
</html>
